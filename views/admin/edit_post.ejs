<%- include('header') -%>

<div class="container-fluid">
  <form method="post" onsubmit="return doEditPost(this)">
    <div class="form-group">
      <label>Title</label>
      <input type="text" name="title" class="form-control" placeholder="Title"
      value="<%= post.title %>">
    </div>

    <div class="form-group">
      <label>Content</label>
      <textarea name="content" class="form-control" placeholder="Content"><%= post.content %></textarea>
    </div>

    <input type="submit" value="Edit" class="btn btn-warning">
  </form>
</div>

<script type="text/javascript">
const postId = '<%= post._id %>'

const doEditPost = form => {
  let formData = {
    title: form.title.value, content: form.content.value, _id: postId
  }

  $.ajax({
    url: "/do-edit-post",
    method: "post",
    data: formData,
    success: res => {
      alert(res)
    }
  })

  return false
}
</script>

<%- include('footer') -%>
